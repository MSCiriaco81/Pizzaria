<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Card치pio de Pizzas com Pre칞o</title>
</head>
<body>
  <h1>游꼣 Card치pio de Pizzas</h1>
  <p>Selecione os sabores desejados:</p>

  <form id="form-pedido">
    <!-- Sabores -->
    <fieldset>
      <legend>Sabores</legend>
  <label><input type="radio" name="sabor" value="Calabresa" data-preco="35.00" /> Calabresa - R$ 35,00</label><br />
  <label><input type="radio" name="sabor" value="Marguerita" data-preco="30.00" /> Marguerita - R$ 30,00</label><br />
  <label><input type="radio" name="sabor" value="Frango com Catupiry" data-preco="40.00" /> Frango com Catupiry - R$ 40,00</label><br />
  <label><input type="radio" name="sabor" value="Portuguesa" data-preco="38.00" /> Portuguesa - R$ 38,00</label><br />
  <label><input type="radio" name="sabor" value="Quatro Queijos" data-preco="45.00" /> Quatro Queijos - R$ 45,00</label><br />
    </fieldset><br />

    <!-- P치gina do card치pio de pizzas (Node.js) -->
    <!DOCTYPE html>
    <html lang="pt-br">
    <head>
      <meta charset="UTF-8" />
      <title>Card치pio de Pizzas com Pre칞o</title> <!-- T칤tulo da p치gina -->
    </head>
    <body>
      <!-- T칤tulo principal -->
      <h1>游꼣 Card치pio de Pizzas</h1>
      <p>Selecione os sabores desejados:</p>

      <!-- Formul치rio do pedido -->
      <form id="form-pedido">
        <!-- Sabores dispon칤veis -->
        <fieldset>
          <legend>Sabores</legend>
          <!-- Cada op칞칚o representa um sabor de pizza -->
          <label><input type="checkbox" name="sabor" value="Calabresa" data-preco="35.00" /> Calabresa - R$ 35,00</label><br />
          <label><input type="checkbox" name="sabor" value="Marguerita" data-preco="30.00" /> Marguerita - R$ 30,00</label><br />
          <label><input type="checkbox" name="sabor" value="Frango com Catupiry" data-preco="40.00" /> Frango com Catupiry - R$ 40,00</label><br />
          <label><input type="checkbox" name="sabor" value="Portuguesa" data-preco="38.00" /> Portuguesa - R$ 38,00</label><br />
          <label><input type="checkbox" name="sabor" value="Quatro Queijos" data-preco="45.00" /> Quatro Queijos - R$ 45,00</label><br />
        </fieldset><br />

        <!-- Tamanhos dispon칤veis -->
        <fieldset>
          <legend>Tamanho da Pizza</legend>
          <!-- Cada op칞칚o representa um tamanho e seu multiplicador de pre칞o -->
          <label><input type="radio" name="tamanho" value="Pequena" data-multiplicador="1" checked /> Pequena</label><br />
          <label><input type="radio" name="tamanho" value="M칠dia" data-multiplicador="1.3" /> M칠dia (+30%)</label><br />
          <label><input type="radio" name="tamanho" value="Grande" data-multiplicador="1.5" /> Grande (+50%)</label><br />
        </fieldset><br />

        <!-- Adicionais dispon칤veis -->
        <fieldset>
          <legend>Adicionais</legend>
          <!-- Cada op칞칚o representa um adicional extra -->
          <label><input type="checkbox" name="adicional" value="Borda Recheada" data-preco="5.00" /> Borda Recheada - R$ 5,00</label><br />
          <label><input type="checkbox" name="adicional" value="Extra Queijo" data-preco="7.00" /> Extra de Queijo - R$ 7,00</label><br />
          <label><input type="checkbox" name="adicional" value="Bacon" data-preco="6.00" /> Bacon - R$ 6,00</label><br />
          <label><input type="checkbox" name="adicional" value="Pepperoni" data-preco="8.00" /> Pepperoni - R$ 8,00</label><br />
          <label><input type="checkbox" name="adicional" value="Azeitona" data-preco="3.00" /> Azeitona - R$ 3,00</label><br />
          <label><input type="checkbox" name="adicional" value="Champignon" data-preco="4.00" /> Champignon - R$ 4,00</label><br />
          <label><input type="checkbox" name="adicional" value="Alho" data-preco="2.00" /> Alho - R$ 2,00</label><br />
        </fieldset><br />

        <button type="submit">Enviar Pedido</button>
      </form>

      <script>
        // Seleciona o formul치rio do pedido
        const form = document.getElementById('form-pedido');

        // Adiciona evento para tratar o envio do formul치rio
        form.addEventListener('submit', (e) => {
          e.preventDefault(); // Impede o envio padr칚o

          // Pega os sabores selecionados
          const saboresSelecionados = Array.from(document.querySelectorAll('input[name="sabor"]:checked'));
          if (saboresSelecionados.length === 0) {
            alert('Por favor, selecione ao menos um sabor.');
            return;
          }

          // Pega o tamanho selecionado
          const tamanhoSelecionado = document.querySelector('input[name="tamanho"]:checked');
          const multiplicador = parseFloat(tamanhoSelecionado.getAttribute('data-multiplicador'));
          const tamanhoNome = tamanhoSelecionado.value;

          // Pega os adicionais selecionados
          const adicionaisSelecionados = Array.from(document.querySelectorAll('input[name="adicional"]:checked'));

          // Soma os pre칞os dos sabores
          let totalSabores = saboresSelecionados.reduce((acc, el) => acc + parseFloat(el.dataset.preco), 0);
          // Soma os pre칞os dos adicionais
          let totalAdicionais = adicionaisSelecionados.reduce((acc, el) => acc + parseFloat(el.dataset.preco), 0);

          // Aplica o multiplicador do tamanho
          const total = (totalSabores * multiplicador) + totalAdicionais;

          // Monta a query string para enviar os dados do pedido
          const query = new URLSearchParams({
            sabores: saboresSelecionados.map(el => el.value).join(','),
            tamanho: tamanhoNome,
            adicionais: adicionaisSelecionados.map(el => el.value).join(',') || 'Nenhum',
            total: total.toFixed(2)
          });

          // Redireciona para a p치gina de pedido com os dados na URL
          window.location.href = `/pedido?${query.toString()}`;
        });
      </script>
    </body>
    </html>
